<!--
@Author: Manuel Rodriguez <valle>
@Date:   18-Oct-2017
@Email:  valle.mrv@gmail.com
@Last modified by:   valle
@Last modified time: 2019-03-13T10:52:14+01:00
@License: Apache license vesion 2.0
-->

<!DOCTYPE document SYSTEM "rml.dtd">
<document filename="factura_{{id}}.pdf">
  <template leftMargin="40" title="{{title}}" showBoundary="no">
    <!--this section contains elements of the document -->
    <!--which are FIXED into position. -->
    <pageTemplate id="main" pageSize="a4">
      <pageGraphics>
        <setFont name="Helvetica-Bold" size="14"/>
        <drawString  x="40" y="780" >{{razon_social}}</drawString >
        <drawString  x="40" y="765" >{{emp_nif}}</drawString >
        <drawString  x="40" y="750" >{{emp_direccion}}</drawString >
        <drawString  x="40" y="735" >{{emp_cp}}, {{emp_poblacion}}, {{emp_provincia}}</drawString >
        <drawString  x="40" y="720" >{{emp_telefono}}</drawString >
        
        <setFont name="Helvetica-Bold" size="12"/>
        <drawString  x="300" y="760" >CLIENTE:</drawString >
        <drawString  x="300" y="740" >{{nombre}}</drawString >
        <drawString  x="300" y="725" >{{DNI}}</drawString >
        <drawString  x="300" y="710" >{{domicilio}}</drawString >
        <drawString  x="300" y="695" >{{cp}}, {{poblacion}}, {{provincia}}</drawString >
        
        <setFont name="Helvetica-Bold" size="10"/>
        <stroke color="black"/>
        <fill color="gray"/>
        <rect x="40" y="625" width="270" height="20"
            fill="yes" stroke="yes" />
        <rect x="310" y="625" width="80" height="20"
            fill="yes" stroke="yes" />
        <rect x="390" y="625" width="80" height="20"
            fill="yes" stroke="yes" />
        <rect x="470" y="625" width="90" height="20"
            fill="yes" stroke="yes" />
        
        <rect x="40" y="225" width="270" height="400"
            fill="no" stroke="yes" />
        <rect x="310" y="225" width="80" height="400"
            fill="no" stroke="yes" />
        <rect x="390" y="225" width="80" height="400"
            fill="no" stroke="yes" />
        <rect x="470" y="225" width="90" height="400"
            fill="no" stroke="yes" />
        


        <fill color="black"/>
        <drawString  x="50" y="630">DESCRIPCION</drawString >
        <drawString  x="320" y="630" >CANTIDAD </drawString >
        <drawString  x="400" y="630" >PRECIO UND. </drawString >
        <drawString  x="495" y="630" >TOTAL </drawString >
        
      </pageGraphics>

      <frame  x1="40" y1="650" width="525" height="50"/>
      <frame  x1="20" y1="225" width="560" height="400"/>
      <frame  x1="385" y1="120" width="150" height="100"/> 
      <frame  x1="390" y1="120" width="150" height="100"/>            

    </pageTemplate>
  </template>

  <stylesheet>
  </stylesheet>
  
  <story>
     
      <para fontSize="13">
          <b>Fecha:</b> {{fecha}}
      </para>
        <spacer length="1"/>
      <para fontSize="13">
          <b>Nº Factura:</b> {{num_factura}}
      </para>
     
      <nextFrame />
         {% if productos %}
         <blockTable colWidths="250,80,80,90" >
           {% for p in productos %}
           <tr>
              <td> <para alignment="left">{{p.Nombre}}</para></td>
              <td> <para alignment="right">{{p.Can}}</para></td>
              <td> <para alignment="right">{{p.Precio}} €</para> </td>
              <td> <para alignment="right">{{p.Total}} €</para></td>  
            </tr>
           {% endfor %}
         </blockTable>
         {% endif %}

       <nextFrame />
          <para fontSize="16">
            <b>Sub total:</b>
          </para>
          <spacer length="1"/>
          <para fontSize="16">
            <b>Iva {{iva}}%:</b> 
          </para>
          <spacer length="1"/>
          <para fontSize="18">
            <b>Total:</b> 
          </para>

          <nextFrame />
          <para fontSize="16" alignment="right">
            {{can_base}} €
          </para>
          <spacer length="1"/>
          <para fontSize="16" alignment="right">
             {{can_iva}} €
          </para>
          <spacer length="1"/>
          <para fontSize="18" alignment="right">
             {{total}} €
          </para>

   </story>
</document>
